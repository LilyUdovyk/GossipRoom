(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[4],{160:function(e,a){},163:function(e,a,t){e.exports={profile:"style_profile__2a_cU"}},164:function(e,a,t){e.exports={buttonWithPopup:"style_buttonWithPopup__1lQAQ",navOpener:"style_navOpener__3Hw_I",popup:"style_popup__u9k-3",popupHeader:"style_popupHeader__2ZHlh",navSidebar:"style_navSidebar__3o8Bs",navList:"style_navList__1QP6Z",navItem:"style_navItem__1zHpi"}},165:function(e,a,t){e.exports={sidebar:"style_sidebar__3J9v9",buttonBlock:"style_buttonBlock__3eLO2",navButton:"style_navButton__2lPuw"}},166:function(e,a,t){e.exports={main:"style_main__F82O7"}},167:function(e,a,t){e.exports={empty:"style_empty__1X47t",emptyName:"style_emptyName__2XU3c",emptyInfo:"style_emptyInfo__R38MY",avatar:"style_avatar__UQFNR"}},168:function(e,a,t){e.exports={header:"style_header__MlSQ_",headerName:"style_headerName__qUa0b",settingsButton:"style_settingsButton__29FvD"}},169:function(e,a,t){e.exports={buttonWithChatDetails:"style_buttonWithChatDetails__3XgXd",navOpener:"style_navOpener__15gIU",chatDetails:"style_chatDetails__2vnMD",chatDetailsHeader:"style_chatDetailsHeader__16vpH",navSidebar:"style_navSidebar__fvfWt",navList:"style_navList__1aX_5",navItem:"style_navItem__3Qxgo"}},190:function(e,a){},214:function(e,a,t){e.exports={attachmentLink:"style_attachmentLink__DNDkC",fileIcon:"style_fileIcon__1WFEO"}},215:function(e,a,t){e.exports={mediaAttachment:"style_mediaAttachment__3QnPn",attachment:"style_attachment__1OkB3"}},216:function(e,a,t){e.exports={forwardingContainer:"style_forwardingContainer__5s0m0",containerHeader:"style_containerHeader__1xJtM",containerTitle:"style_containerTitle__3_Ko8"}},217:function(e,a,t){e.exports={messageMenu:"style_messageMenu__pJRDf",invisible:"style_invisible__1LjwZ",menuList:"style_menuList__AcjpA",menuItem:"style_menuItem__8d5iJ"}},218:function(e,a,t){e.exports={chats:"style_chats__jiJor",chat:"style_chat__15hmj",isUserMsg:"style_isUserMsg__23Qao",replyBlock:"style_replyBlock__17Q2S",owner:"style_owner__bGB4C",timeBlock:"style_timeBlock__3B-5_"}},221:function(e,a,t){e.exports={buttonWithEmoji:"style_buttonWithEmoji__1MOip",emojiBlock:"style_emojiBlock__3BsgC",button:"style_button__3YROV"}},222:function(e,a,t){e.exports={paperclipButton:"style_paperclipButton__HjiF1",uploadButton:"style_uploadButton__2q1Mt",dialogContainer:"style_dialogContainer__HF7Tf",dialogHeader:"style_dialogHeader__OE5dX",dialogForm:"style_dialogForm__3EKHg",dialogLabel:"style_dialogLabel__3UVsc",dialogInput:"style_dialogInput__bH3wN",submitBtn:"style_submitBtn__3REnT"}},223:function(e,a,t){e.exports={originalMessageBlock:"style_originalMessageBlock__2t3vV",originalMessage:"style_originalMessage__200am",owner:"style_owner__29svV",deleteOriginalMessage:"style_deleteOriginalMessage__3eBEB"}},224:function(e,a,t){e.exports={messageBlock:"style_messageBlock__3YrA3",messageForm:"style_messageForm__3Mcuz",messageInput:"style_messageInput__2lCn9",button:"style_button__3Jpgk",ButtonWithEmoji:"style_ButtonWithEmoji__2Pk_-",buttonBlock:"style_buttonBlock__g4UAK",uploadBtnWrapper:"style_uploadBtnWrapper__bhQkQ",uploadInput:"style_uploadInput__2F-YU"}},225:function(e,a,t){e.exports={chatWindow:"style_chatWindow__14ABs"}},238:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),s=t(21),r=t(22),l=t(132),i=t.n(l),o=t(17),m=t(13),u=t(163),g=t.n(u),d=t(65),v=t(68),f=t(25),h=t(9),p=t(85),E=t(72),_=t.n(E),b=t(94),y=t.n(b),N=t(64),M=t(15),C=t(164),w=t.n(C),k=Object(r.c)((function(e){return{nick:e.user.userData.nick,login:e.user.userData.login,avatar:e.user.userData.avatar?"http://chat.fs.a-level.com.ua/".concat(e.user.userData.avatar.url):_.a}}),(function(e){return Object(s.b)({logout:M.b},e)}))(c.a.memo((function(e){var a=c.a.useState(!1),t=Object(d.a)(a,2),n=t[0],s=t[1],r=c.a.useRef(null),l=c.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&s(!1)}),[s]);c.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n]);return c.a.createElement("div",{className:w.a.buttonWithPopup},c.a.createElement("button",{onClick:function(){s(!n)},className:w.a.navOpener},c.a.createElement(v.a,{icon:"bars"})),n&&c.a.createElement("div",{ref:r,className:w.a.popup},c.a.createElement("div",{className:w.a.popupHeader},c.a.createElement("img",{src:e.avatar}),c.a.createElement("p",null,e.nick||e.login)),c.a.createElement("nav",{className:w.a.navSidebar},c.a.createElement("ul",{className:w.a.navList},c.a.createElement("li",{className:w.a.navItem},c.a.createElement(N.a,{to:"/new-group"},c.a.createElement(v.a,{icon:"comments"}),"New group")),c.a.createElement("li",{className:w.a.navItem},c.a.createElement(N.a,{to:"/user-settings"},c.a.createElement(v.a,{icon:"cogs"}),"Settings")),c.a.createElement("li",{className:w.a.navItem,onClick:function(){e.logout()}},c.a.createElement(v.a,{icon:"sign-out-alt"}),"Exit")))))}))),I=t(165),O=t.n(I),D=Object(r.c)((function(e){return{activeUserId:e.user.userData._id,contacts:e.contacts.contactsData,chats:e.user.userData.chats,activeChatId:e.chat.chatSuccessData.activeChat._id,newMessage:e.message.messageData}}),(function(e){return Object(s.b)({getContacts:f.a.request,getUser:o.a.request,getActiveChat:h.c.request,addChat:h.a.request},e)}))(c.a.memo((function(e){var a=c.a.useState("chats"),t=Object(d.a)(a,2),n=t[0],s=t[1];c.a.useEffect((function(){localStorage.getItem("authToken")&&(e.getUser(),e.getContacts())}),[]);var r=function(a){var t;if(1===a.members.length)t={name:a.title||"You",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a};else if(a.members.length>2)t={name:a.title||"Group",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):y.a};else{var n=a.members.find((function(a){return a._id!==e.activeUserId})),c=n&&(n.nick||n.login),s=n&&n.avatar&&"http://chat.fs.a-level.com.ua/".concat(n.avatar.url);t={name:a.title||c,avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):s||_.a}}return t},l=function(a){var t=[];return e.chats.map((function(e){2===e.members.length&&e.members.forEach((function(n){n._id===a&&t.push(e._id)}))})),t};return c.a.createElement("aside",{className:O.a.sidebar},c.a.createElement("div",{className:O.a.buttonBlock},c.a.createElement(k,null),"chats"===n&&c.a.createElement("button",{className:O.a.navButton,title:"Contacts",onClick:function(){return s("contacts")}},c.a.createElement(v.a,{icon:"user-friends"})),"contacts"===n&&c.a.createElement("button",{className:O.a.navButton,title:"Chats",onClick:function(){return s("chats")}},c.a.createElement(v.a,{icon:"comments"}))),"chats"===n?c.a.createElement(c.a.Fragment,null,e.chats.map((function(a){return c.a.createElement(p.a,{key:a._id,chatId:a._id,name:r(a).name,avatarSrc:r(a).avatar,newMessage:e.newMessage,activeChatId:e.activeChatId,onClick:function(){return t=a._id,void e.getActiveChat(t);var t}})}))):c.a.createElement(c.a.Fragment,null,e.contacts.map((function(a){return c.a.createElement(p.a,{key:a._id,name:a.nick||a.login,avatarSrc:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a,onClick:function(){return t=a._id,void(l(t).length?e.getActiveChat(l(t)[0]):e.addChat(t));var t}})}))))}))),B=t(166),j=t.n(B),F=t(167),x=t.n(F),S=c.a.memo((function(e){return c.a.createElement("div",{className:x.a.empty},c.a.createElement("h1",{className:x.a.emptyName},"Welcome, ",e.name," "),c.a.createElement("img",{src:e.avatarSrc,alt:e.name,className:x.a.avatar}),c.a.createElement("p",{className:x.a.emptyInfo},"Please select a chat to start messaging"))})),L=t(168),R=t.n(L),q=t(169),A=t.n(q),U=Object(r.c)((function(e){return{activeChat:e.chat.chatSuccessData.activeChat,activeChatName:e.chat.chatSuccessData.activeChatName,activeUserId:e.user.userData._id}}),(function(e){return Object(s.b)({logout:M.b},e)}))(c.a.memo((function(e){var a=c.a.useState(!1),t=Object(d.a)(a,2),n=t[0],s=t[1],r=c.a.useRef(null),l=c.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&s(!1)}),[s]);c.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n]);return c.a.createElement("div",{className:A.a.buttonWithChatDetails},c.a.createElement("button",{onClick:function(){s(!n)},className:A.a.navOpener},c.a.createElement(v.a,{icon:"comment-dots"})),n&&c.a.createElement("div",{ref:r,className:A.a.chatDetails},c.a.createElement("div",{className:A.a.chatDetailsHeader},c.a.createElement("img",{src:function(a){var t;if(1===a.members.length)t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a;else if(a.members.length>2)t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):y.a;else{var n=a.members.find((function(a){return a._id!==e.activeUserId})),c=n&&n.avatar&&"http://chat.fs.a-level.com.ua/".concat(n.avatar.url);t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):c||_.a}return t}(e.activeChat)}),c.a.createElement("p",null,e.activeChatName)),c.a.createElement("nav",{className:A.a.navSidebar},c.a.createElement("ul",{className:A.a.navList},c.a.createElement("li",{className:A.a.navItem},c.a.createElement(N.a,{to:"/chat-settings"},c.a.createElement(v.a,{icon:"cogs"}),"Settings"))))))}))),T=c.a.memo((function(e){return c.a.createElement("header",{className:R.a.header},c.a.createElement("h1",{className:R.a.headerName},e.activeChatName),c.a.createElement(U,null))})),V=t(40),Y=t(118),Q=t.n(Y),P=t(170),W=t.n(P),H=t(171),G=t(172),J=t(202),X=t.n(J),K=t(209),z=t.n(K),Z=t(214),$=t.n(Z),ee=c.a.memo((function(e){return c.a.createElement("a",{href:"http://chat.fs.a-level.com.ua/".concat(e.url),className:$.a.attachmentLink},c.a.createElement(v.a,{icon:e.icon,size:"3x",className:$.a.fileIcon}),c.a.createElement("p",null,e.text))})),ae=t(215),te=t.n(ae),ne=c.a.memo((function(e){var a=e.message&&e.message.text&&e.message.text.match(/http(?:s?):\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w\-\_]*)(&(amp;)?\u200c [\w\?\u200c =]*)?/);if(a){var t=a&&a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:e.message&&e.message.text},e.message&&e.message.text),c.a.createElement(H.a,{url:"https://www.youtube.com/embed/".concat(t),width:"100%",frameBorder:0,allow:"accelerometer",allowFullScreen:!0,"encrypted-media":!0,"picture-in-picture":!0}))}return e.message&&e.message.media?c.a.createElement("div",{className:te.a.mediaAttachment},c.a.createElement("p",null,e.message.text),e.message.media.map((function(e){return"image/png"===e.type||"image/jpeg"===e.type?c.a.createElement("img",{key:e._id,className:te.a.attachment,src:"http://chat.fs.a-level.com.ua/".concat(e.url),alt:"Attachment"}):"video/mp4"===e.type||"video/webm"===e.type||"video/ogg"===e.type?c.a.createElement(c.a.Fragment,null,c.a.createElement(ee,{url:e.url,icon:"file-video",text:e.originalFileName}),c.a.createElement("video",{key:e._id,className:te.a.attachment,controls:!0},c.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/mp4"}),c.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/webm"}),c.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/ogg"}),c.a.createElement("p",null,"Your browser doesn't support HTML5 video. Download this file for review."))):"audio/mp3"===e.type||"audio/ogg"===e.type?c.a.createElement(c.a.Fragment,null,c.a.createElement(ee,{url:e.url,icon:"file-audio",text:e.originalFileName}),c.a.createElement("audio",{controls:!0,key:e._id,className:te.a.attachment},c.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"audio/mp3"}),c.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"audio/ogg"}),c.a.createElement("p",null,"Your browser doesn't support HTML5 audio. Download this file for review."))):"application/zip"===e.type?c.a.createElement(ee,{url:e.url,icon:"file-archive",text:e.originalFileName}):e.type&&(e.type.includes("application")||e.type.includes("text"))?c.a.createElement(ee,{url:e.url,icon:"file-alt",text:e.originalFileName}):c.a.createElement(ee,{url:e.url,icon:"file",text:e.originalFileName})}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,e.message&&e.message.text),e.message&&e.message.text&&c.a.createElement(X.a,null,function(e){var a=z()(e),t=Array.from(a).map((function(e,a){return c.a.createElement(G.a,{url:e,key:a})}));return c.a.createElement(c.a.Fragment,null,t)}(e.message.text)))})),ce=t(216),se=t.n(ce),re=Object(r.c)((function(e){return{chats:e.user.userData.chats,activeUserId:e.user.userData._id,originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(s.b)({getActiveChat:h.c.request,forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(c.a.memo((function(e){var a=c.a.useRef(null);c.a.useEffect((function(){e.isForward?document.addEventListener("click",t):document.removeEventListener("click",t)}),[e.isForward]);var t=function(e){e.target instanceof Element&&a.current&&!a.current.contains(e.target)&&n()},n=function(){e.saveOriginalMessage({originalMessage:null,isReply:!1,isForward:!1})},s=function(a){if(1===a.members.length)return{name:"You",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a};if(a.members.length>2)return{name:a.title||"Group",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):y.a};var t=a.members.find((function(a){return a._id!==e.activeUserId})),n=t&&t.avatar&&"http://chat.fs.a-level.com.ua/".concat(t.avatar.url),c=t&&(t.nick||t.login);return{name:a.title?a.title:c,avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):n||_.a}};return c.a.createElement("div",{ref:a,className:se.a.forwardingContainer},c.a.createElement("header",{className:se.a.containerHeader},c.a.createElement("h4",{className:se.a.containerTitle},"Choose recipient"),c.a.createElement("button",{onClick:function(){return n()}},c.a.createElement(v.a,{icon:"times"}))),c.a.createElement("div",null,e.chats.map((function(a){return c.a.createElement(p.a,{key:a._id,chatId:a._id,name:s(a).name,avatarSrc:s(a).avatar,onClick:function(){return t=a._id,e.getActiveChat(t),void(e.originalMessage&&e.forwardMessage({activeChatId:t,originalMessageId:e.originalMessage._id}));var t}})}))))}))),le=t(217),ie=t.n(le),oe=Object(r.c)((function(e){return{originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward,isReply:e.message.savedMessage.isReply}}),(function(e){return Object(s.b)({forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(c.a.memo((function(e){var a=c.a.useState(!0),t=Object(d.a)(a,2),n=t[0],s=t[1],r=c.a.useRef(null);c.a.useEffect((function(){e.originalMessage?document.addEventListener("click",l):document.removeEventListener("click",l)}),[e.originalMessage]);var l=c.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&s(!1)}),[s]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:r,className:Q()(ie.a.messageMenu,Object(V.a)({},ie.a.invisible,!n))},c.a.createElement("ul",{className:ie.a.menuList},c.a.createElement("li",{className:ie.a.menuItem,onClick:function(){return e.saveOriginalMessage({originalMessage:e.originalMessage,isReply:!0}),void s(!1)}},c.a.createElement(v.a,{icon:"reply"}),"Reply"),c.a.createElement("li",{className:ie.a.menuItem,onClick:function(){e.saveOriginalMessage({originalMessage:e.originalMessage,isForward:!0})}},c.a.createElement(v.a,{icon:"share"}),"Forward message"))),e.isForward&&c.a.createElement(re,null))}))),me=t(218),ue=t.n(me),ge=Object(r.c)((function(e){return{activeUserId:e.user.userData._id,nick:e.user.userData.nick,activeChat:e.chat.chatSuccessData.activeChat,activeChatName:e.chat.chatSuccessData.activeChatName,messages:e.chat.chatSuccessData.activeChat?e.chat.chatSuccessData.activeChat.messages:[],media:e.message.messageData.media,mediaUrl:e.media.fileData.url,originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(s.b)({saveOriginalMessage:m.d},e)}))(c.a.memo((function(e){var a=Object(n.useRef)(null);c.a.useEffect((function(){t()}),[]),c.a.useEffect((function(){t()}),[e.messages]);var t=function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},s=function(a){return a.owner._id===e.activeUserId};return c.a.createElement("div",{className:ue.a.chats,ref:a},e.messages&&e.messages.map((function(a){return c.a.createElement("div",{key:a._id,className:Q()(ue.a.chat,Object(V.a)({},ue.a.isUserMsg,s(a))),onClick:function(){return function(a){e.saveOriginalMessage({originalMessage:a,isReply:!1,isForward:!1})}(a)}},a.replyTo&&c.a.createElement("div",{className:ue.a.replyBlock},c.a.createElement("p",{className:ue.a.owner},a.replyTo.owner.nick||a.replyTo.owner.login),c.a.createElement(ne,{message:a.replyTo})),a.forwarded&&c.a.createElement("div",{className:ue.a.forwardedBlock},c.a.createElement("p",{className:ue.a.owner},"Forwarded from ",a.forwarded.owner.nick||a.forwarded.owner.login),c.a.createElement(ne,{message:a.forwarded})),e.activeChat.title&&!s(a)&&c.a.createElement("p",{className:ue.a.owner},a.owner.nick||a.owner.login),c.a.createElement(ne,{message:a}),c.a.createElement("time",{className:ue.a.timeBlock},W()(+a.createdAt).format("HH:mm  DD.MM")))})),e.originalMessage&&c.a.createElement(oe,null))}))),de=(t(219),t(229)),ve=t(221),fe=t.n(ve),he=c.a.memo((function(e){var a=c.a.useState(!1),t=Object(d.a)(a,2),n=t[0],s=t[1],r=c.a.useRef(null),l=c.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&s(!1)}),[s]);c.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n]);return c.a.createElement("div",{className:fe.a.buttonWithEmoji},c.a.createElement("button",{onClick:function(){s(!n)},className:fe.a.button},c.a.createElement(v.a,{icon:"smile"})),n&&c.a.createElement("div",{ref:r,className:fe.a.emojiBlock},c.a.createElement(de.a,{set:"google",onSelect:e.addEmoji})))})),pe=t(24),Ee=t(222),_e=t.n(Ee),be=Object(r.c)((function(e){return{activeChatId:e.chat.chatSuccessData.activeChat._id,fileId:e.media.fileData._id}}),(function(e){return Object(s.b)({uploadFile:pe.a.request,sendMessage:m.e.request},e)}))(c.a.memo((function(e){var a=c.a.useState(!1),t=Object(d.a)(a,2),n=t[0],s=t[1],r=c.a.useState(""),l=Object(d.a)(r,2),i=l[0],o=l[1],m=c.a.useRef(null),u=c.a.useRef(null),g=c.a.useRef(null),f=c.a.useCallback((function(e){e.target instanceof Element&&m.current&&!m.current.contains(e.target)&&s(!1)}),[s]);c.a.useEffect((function(){n?document.addEventListener("click",f):document.removeEventListener("click",f)}),[n]);return c.a.createElement("div",{className:_e.a.buttonWithFileUpload},c.a.createElement("button",{onClick:function(){s(!n)},className:_e.a.paperclipButton},c.a.createElement(v.a,{icon:"paperclip"})),n&&c.a.createElement("div",{ref:m,className:_e.a.dialogContainer},c.a.createElement("header",{className:_e.a.dialogHeader},c.a.createElement("h4",null,"Upload a file"),c.a.createElement("button",{onClick:function(){return s(!1)}},c.a.createElement(v.a,{icon:"times"}))),c.a.createElement("form",{className:_e.a.dialogForm,ref:u,method:"post",action:"/upload",encType:"multipart/form-data",id:"form",onSubmit:function(a){e.activeChatId&&e.sendMessage({activeChatId:e.activeChatId,text:i,mediaId:e.fileId}),s(!1),o("")}},c.a.createElement("input",{type:"file",name:"media",id:"media",ref:g,onChange:function(){var a;u.current&&(a=u.current,e.uploadFile(a))}}),c.a.createElement("label",{className:_e.a.dialogLabel,htmlFor:"fileMessage"},"Add a message about the file"),c.a.createElement("input",{id:"fileMessage",className:_e.a.dialogInput,autoFocus:!0,type:"text",name:"fileMessage",value:i,onChange:function(e){return o(e.target.value)},placeholder:"Write your message"}),c.a.createElement("button",{type:"submit",className:_e.a.submitBtn},"Upload"))))}))),ye=t(223),Ne=t.n(ye),Me=c.a.memo((function(e){return c.a.createElement("div",{className:Ne.a.originalMessageBlock},c.a.createElement("div",{className:Ne.a.originalMessage},c.a.createElement("p",{className:Ne.a.owner},e.originalMessage&&(e.originalMessage.owner.nick||e.originalMessage.owner.login)),c.a.createElement(ne,{message:e.originalMessage}),c.a.createElement("button",{onClick:e.deleteOriginalMessage,className:Ne.a.deleteOriginalMessage},c.a.createElement(v.a,{icon:"times"}))))})),Ce=t(224),we=t.n(Ce),ke=Object(r.c)((function(e){return{activeChatId:e.chat.chatSuccessData.activeChat._id,originalMessage:e.message.savedMessage.originalMessage,isReply:e.message.savedMessage.isReply,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(s.b)({sendMessage:m.e.request,replyToMessage:m.c.request,forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(c.a.memo((function(e){var a=c.a.useState(""),t=Object(d.a)(a,2),n=t[0],s=t[1];return c.a.createElement(c.a.Fragment,null,e.isReply&&c.a.createElement(Me,{originalMessage:e.originalMessage,deleteOriginalMessage:function(){e.saveOriginalMessage({originalMessage:null,isReply:!1,isForward:!1})}}),c.a.createElement("div",{className:we.a.messageBlock},c.a.createElement(he,{addEmoji:function(e){s(n+e.native)}}),c.a.createElement("form",{action:"",onSubmit:function(a){a.preventDefault(),""!==n.trim()&&(e.activeChatId&&e.originalMessage&&e.isReply?e.replyToMessage({activeChatId:e.activeChatId,text:n,originalMessageId:e.originalMessage._id}):e.activeChatId&&e.sendMessage({activeChatId:e.activeChatId,text:n,mediaId:null}),s(""))},className:we.a.messageForm},c.a.createElement("input",{className:we.a.messageInput,placeholder:"Write your message",type:"text",autoFocus:!0,value:n,onChange:function(e){return s(e.target.value)}}),c.a.createElement("div",{className:we.a.buttonBlock},c.a.createElement("button",{type:"submit",className:we.a.button},c.a.createElement(v.a,{icon:"paper-plane"})),c.a.createElement(be,null)))))}))),Ie=t(225),Oe=t.n(Ie),De=c.a.memo((function(e){return c.a.createElement("div",{className:Oe.a.chatWindow},c.a.createElement(T,{activeChatName:e.name}),c.a.createElement(ge,null),c.a.createElement(ke,null))})),Be=Object(r.c)((function(e){return{nick:e.user.userData.nick,login:e.user.userData.login,avatar:e.user.userData.avatar?"http://chat.fs.a-level.com.ua/".concat(e.user.userData.avatar.url):_.a,activeChatId:e.chat.chatSuccessData.activeChat._id,activeChatName:e.chat.chatSuccessData.activeChatName}}),(function(e){return Object(s.b)({getUser:o.a.request},e)}))(c.a.memo((function(e){return c.a.createElement("main",{className:j.a.main},e.activeChatId?c.a.createElement(De,{name:e.activeChatName}):c.a.createElement(S,{name:e.nick||e.login,avatarSrc:e.avatar}))})));a.default=Object(r.c)(null,(function(e){return Object(s.b)({getUser:o.a.request,onMessage:m.b},e)}))(c.a.memo((function(e){return c.a.useEffect((function(){if(localStorage.getItem("authToken")){var a=i()("http://chat.fs.a-level.com.ua/");a.emit("jwt",localStorage.authToken),a.on("jwt_ok",(function(e){return console.log(e)})),a.on("jwt_fail",(function(e){return console.log(e)})),a.on("msg",(function(a){e.onMessage(a)}))}}),[]),c.a.createElement("div",{className:g.a.profile},c.a.createElement(D,null),c.a.createElement(Be,null))})))},72:function(e,a,t){e.exports=t.p+"static/media/user_avatar.c3631c65.png"},85:function(e,a,t){"use strict";var n=t(1),c=t.n(n),s=t(65),r=t(92),l=t.n(r),i=c.a.memo((function(e){var a=c.a.useState(0),t=Object(s.a)(a,2),n=t[0],r=t[1],i=e.newMessage&&(e.newMessage.chat?e.newMessage.chat._id:null);return c.a.useEffect((function(){e.newMessage&&i===e.chatId&&e.chatId!==e.activeChatId&&r(n+1),e.chatId===e.activeChatId&&r(0)}),[e.newMessage,e.activeChatId]),c.a.createElement(c.a.Fragment,null,n>0&&c.a.createElement("div",{className:l.a.counter},n))})),o=t(93),m=t.n(o);a.a=c.a.memo((function(e){return c.a.useEffect((function(){localStorage.getItem("authToken")}),[]),c.a.createElement("div",{className:m.a.user,onClick:e.onClick},c.a.createElement("img",{src:e.avatarSrc,alt:"avatar",className:m.a.userImg}),c.a.createElement("div",{className:m.a.userDetails},c.a.createElement("p",{className:m.a.useDetailsName},e.name)),c.a.createElement(i,{chatId:e.chatId,newMessage:e.newMessage,activeChatId:e.activeChatId}))}))},92:function(e,a,t){e.exports={counter:"style_counter__1moC1"}},93:function(e,a,t){e.exports={user:"style_user__2v5VR",userImg:"style_userImg__1CkCR",userDetails:"style_userDetails__wkzC-",userDetailsName:"style_userDetailsName__2_mEK"}},94:function(e,a){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=4.0106be2e.chunk.js.map