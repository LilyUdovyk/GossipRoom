(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[4],{160:function(e,a){},163:function(e,a,t){e.exports={profile:"style_profile__2a_cU"}},164:function(e,a,t){e.exports={buttonWithPopup:"style_buttonWithPopup__1lQAQ",navOpener:"style_navOpener__3Hw_I",popup:"style_popup__u9k-3",popupHeader:"style_popupHeader__2ZHlh",navSidebar:"style_navSidebar__3o8Bs",navList:"style_navList__1QP6Z",navItem:"style_navItem__1zHpi"}},165:function(e,a,t){e.exports={sidebar:"style_sidebar__3J9v9",emptyChatList:"style_emptyChatList__mPQOP",buttonBlock:"style_buttonBlock__3eLO2",navButton:"style_navButton__2lPuw"}},166:function(e,a,t){e.exports={main:"style_main__F82O7"}},167:function(e,a,t){e.exports={empty:"style_empty__1X47t",emptyName:"style_emptyName__2XU3c",emptyInfo:"style_emptyInfo__R38MY",avatar:"style_avatar__UQFNR"}},168:function(e,a,t){e.exports={header:"style_header__MlSQ_",headerName:"style_headerName__qUa0b",settingsButton:"style_settingsButton__29FvD"}},169:function(e,a,t){e.exports={buttonWithChatDetails:"style_buttonWithChatDetails__3XgXd",navOpener:"style_navOpener__15gIU",chatDetails:"style_chatDetails__2vnMD",chatDetailsHeader:"style_chatDetailsHeader__16vpH",navSidebar:"style_navSidebar__fvfWt",navList:"style_navList__1aX_5",navItem:"style_navItem__3Qxgo"}},190:function(e,a){},214:function(e,a,t){e.exports={attachmentLink:"style_attachmentLink__DNDkC",fileIcon:"style_fileIcon__1WFEO"}},215:function(e,a,t){e.exports={mediaAttachment:"style_mediaAttachment__3QnPn",attachment:"style_attachment__1OkB3"}},216:function(e,a,t){e.exports={forwardingContainer:"style_forwardingContainer__5s0m0",containerHeader:"style_containerHeader__1xJtM",containerTitle:"style_containerTitle__3_Ko8"}},217:function(e,a,t){e.exports={messageMenu:"style_messageMenu__pJRDf",invisible:"style_invisible__1LjwZ",menuList:"style_menuList__AcjpA",menuItem:"style_menuItem__8d5iJ"}},218:function(e,a,t){e.exports={chats:"style_chats__jiJor",chat:"style_chat__15hmj",isUserMsg:"style_isUserMsg__23Qao",replyBlock:"style_replyBlock__17Q2S",owner:"style_owner__bGB4C",timeBlock:"style_timeBlock__3B-5_"}},221:function(e,a,t){e.exports={buttonWithEmoji:"style_buttonWithEmoji__1MOip",emojiBlock:"style_emojiBlock__3BsgC",button:"style_button__3YROV"}},222:function(e,a,t){e.exports={paperclipButton:"style_paperclipButton__HjiF1",uploadButton:"style_uploadButton__2q1Mt",dialogContainer:"style_dialogContainer__HF7Tf",dialogHeader:"style_dialogHeader__OE5dX",dialogForm:"style_dialogForm__3EKHg",dialogLabel:"style_dialogLabel__3UVsc",dialogInput:"style_dialogInput__bH3wN",submitBtn:"style_submitBtn__3REnT"}},223:function(e,a,t){e.exports={originalMessageBlock:"style_originalMessageBlock__2t3vV",originalMessage:"style_originalMessage__200am",owner:"style_owner__29svV",deleteOriginalMessage:"style_deleteOriginalMessage__3eBEB"}},224:function(e,a,t){e.exports={messageBlock:"style_messageBlock__3YrA3",messageForm:"style_messageForm__3Mcuz",messageInput:"style_messageInput__2lCn9",button:"style_button__3Jpgk",ButtonWithEmoji:"style_ButtonWithEmoji__2Pk_-",buttonBlock:"style_buttonBlock__g4UAK",uploadBtnWrapper:"style_uploadBtnWrapper__bhQkQ",uploadInput:"style_uploadInput__2F-YU"}},225:function(e,a,t){e.exports={chatWindow:"style_chatWindow__14ABs"}},238:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),c=t(21),r=t(22),l=t(132),i=t.n(l),o=t(15),m=t(13),u=t(163),g=t.n(u),d=t(65),v=t(68),f=t(25),h=t(9),p=t(85),E=t(72),_=t.n(E),y=t(94),b=t.n(y),C=t(64),M=t(164),N=t.n(M),w=Object(r.c)((function(e){return{nick:e.user.userData.nick,login:e.user.userData.login,avatar:e.user.userData.avatar?"http://chat.fs.a-level.com.ua/".concat(e.user.userData.avatar.url):_.a}}),(function(e){return Object(c.b)({logout:o.b},e)}))(s.a.memo((function(e){var a=s.a.useState(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],r=s.a.useRef(null),l=s.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&c(!1)}),[c]);s.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n,l]);return s.a.createElement("div",{className:N.a.buttonWithPopup},s.a.createElement("button",{onClick:function(){c(!n)},className:N.a.navOpener},s.a.createElement(v.a,{icon:"bars"})),n&&s.a.createElement("div",{ref:r,className:N.a.popup},s.a.createElement("div",{className:N.a.popupHeader},s.a.createElement("img",{src:e.avatar,alt:"User avatar"}),s.a.createElement("p",null,e.nick||e.login)),s.a.createElement("nav",{className:N.a.navSidebar},s.a.createElement("ul",{className:N.a.navList},s.a.createElement("li",{className:N.a.navItem},s.a.createElement(C.a,{to:"/new-group"},s.a.createElement(v.a,{icon:"comments"}),"New group")),s.a.createElement("li",{className:N.a.navItem},s.a.createElement(C.a,{to:"/user-settings"},s.a.createElement(v.a,{icon:"cogs"}),"User Settings")),s.a.createElement("li",{className:N.a.navItem,onClick:function(){e.logout()}},s.a.createElement(v.a,{icon:"sign-out-alt"}),"Exit")))))}))),I=t(165),k=t.n(I),O=Object(r.c)((function(e){return{activeUserId:e.user.userData._id,contacts:e.contacts.contactsData,chats:e.user.userData.chats,activeChatId:e.chat.chatSuccessData.activeChat._id,newMessageId:e.message.newMessage?e.message.newMessage.newMessageId:null,newMessageChatId:e.message.newMessage?e.message.newMessage.newMessageChatId:null}}),(function(e){return Object(c.b)({getContacts:f.a.request,getUser:o.a.request,getActiveChat:h.c.request,addChat:h.a.request},e)}))(s.a.memo((function(e){var a=s.a.useState("contacts"),t=Object(d.a)(a,2),n=t[0],c=t[1];s.a.useEffect((function(){localStorage.getItem("authToken")&&(e.getUser(),e.getContacts())}),[]),s.a.useEffect((function(){e.chats&&e.chats.length&&c("chats")}),[e.chats]);var r=function(a){var t;if(1===a.members.length)t={name:a.title||"You",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a};else if(a.members.length>2)t={name:a.title||"Group",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):b.a};else{var n=a.members.find((function(a){return a._id!==e.activeUserId})),s=n&&(n.nick||n.login),c=n&&n.avatar&&"http://chat.fs.a-level.com.ua/".concat(n.avatar.url);t={name:a.title||s,avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):c||_.a}}return t},l=function(a){var t=[];return e.chats&&e.chats.map((function(e){2===e.members.length&&e.members.forEach((function(n){n._id===a&&t.push(e._id)}))})),t};return s.a.createElement("aside",{className:k.a.sidebar},s.a.createElement("div",{className:k.a.buttonBlock},s.a.createElement(w,null),"chats"===n&&s.a.createElement("button",{className:k.a.navButton,title:"Contacts",onClick:function(){return c("contacts")}},s.a.createElement(v.a,{icon:"user-friends"})),"contacts"===n&&s.a.createElement("button",{className:k.a.navButton,title:"Chats",onClick:function(){return c("chats")}},s.a.createElement(v.a,{icon:"comments"}))),"chats"===n?e.chats?s.a.createElement(s.a.Fragment,null,e.chats.map((function(a){return s.a.createElement(p.a,{key:a._id,chatId:a._id,name:r(a).name,avatarSrc:r(a).avatar,newMessageId:e.newMessageId,newMessageChatId:e.newMessageChatId,activeChatId:e.activeChatId,onClick:function(){return t=a._id,void e.getActiveChat(t);var t}})}))):s.a.createElement("div",{className:k.a.emptyChatList},"Your chat list is empty, please, select a contact to start messaging"):"contacts"===n?s.a.createElement(s.a.Fragment,null,e.contacts.map((function(a){return s.a.createElement(p.a,{key:a._id,name:a.nick||a.login,avatarSrc:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a,onClick:function(){return t=a._id,void(l(t).length?e.getActiveChat(l(t)[0]):e.addChat(t));var t}})}))):void 0)}))),D=t(166),B=t.n(D),j=t(167),F=t.n(j),x=s.a.memo((function(e){return s.a.createElement("div",{className:F.a.empty},s.a.createElement("h1",{className:F.a.emptyName},"Welcome, ",e.name," "),s.a.createElement("img",{src:e.avatarSrc,alt:e.name,className:F.a.avatar}),s.a.createElement("p",{className:F.a.emptyInfo},"Please select a chat to start messaging"))})),L=t(168),S=t.n(L),R=t(169),q=t.n(R),A=Object(r.c)((function(e){return{activeChat:e.chat.chatSuccessData.activeChat,activeChatName:e.chat.chatSuccessData.activeChatName,activeUserId:e.user.userData._id}}),null)(s.a.memo((function(e){var a=s.a.useState(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],r=s.a.useRef(null),l=s.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&c(!1)}),[c]);s.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n,l]);return s.a.createElement("div",{className:q.a.buttonWithChatDetails},s.a.createElement("button",{onClick:function(){c(!n)},className:q.a.navOpener},s.a.createElement(v.a,{icon:"comment-dots"})),n&&s.a.createElement("div",{ref:r,className:q.a.chatDetails},s.a.createElement("div",{className:q.a.chatDetailsHeader},s.a.createElement("img",{src:function(a){var t;if(1===a.members.length)t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a;else if(a.members.length>2)t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):b.a;else{var n=a.members.find((function(a){return a._id!==e.activeUserId})),s=n&&n.avatar&&"http://chat.fs.a-level.com.ua/".concat(n.avatar.url);t=a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):s||_.a}return t}(e.activeChat),alt:"Chat avatar"}),s.a.createElement("p",null,e.activeChatName)),s.a.createElement("nav",{className:q.a.navSidebar},s.a.createElement("ul",{className:q.a.navList},s.a.createElement("li",{className:q.a.navItem},s.a.createElement(C.a,{to:"/chat-settings"},s.a.createElement(v.a,{icon:"cogs"}),"Chat Settings"))))))}))),U=s.a.memo((function(e){return s.a.createElement("header",{className:S.a.header},s.a.createElement("h1",{className:S.a.headerName},e.activeChatName),s.a.createElement(A,null))})),T=t(40),V=t(118),Y=t.n(V),P=t(170),Q=t.n(P),W=t(171),H=t(172),G=t(202),J=t.n(G),X=t(209),K=t.n(X),z=t(214),Z=t.n(z),$=s.a.memo((function(e){return s.a.createElement("a",{href:"http://chat.fs.a-level.com.ua/".concat(e.url),className:Z.a.attachmentLink},s.a.createElement(v.a,{icon:e.icon,size:"3x",className:Z.a.fileIcon}),s.a.createElement("p",null,e.text))})),ee=t(215),ae=t.n(ee),te=s.a.memo((function(e){var a=e.message&&e.message.text&&e.message.text.match(/http(?:s?):\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w\-\_]*)(&(amp;)?\u200c [\w\?\u200c =]*)?/);if(a){var t=a&&a[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:e.message&&e.message.text},e.message&&e.message.text),s.a.createElement(W.a,{url:"https://www.youtube.com/embed/".concat(t),width:"100%",frameBorder:0,allow:"accelerometer",allowFullScreen:!0,"encrypted-media":!0,"picture-in-picture":!0}))}return e.message&&e.message.media?s.a.createElement("div",{className:ae.a.mediaAttachment},s.a.createElement("p",null,e.message.text),e.message.media.map((function(e){return"image/png"===e.type||"image/jpeg"===e.type?s.a.createElement("img",{key:e._id,className:ae.a.attachment,src:"http://chat.fs.a-level.com.ua/".concat(e.url),alt:"Attachment"}):"video/mp4"===e.type||"video/webm"===e.type||"video/ogg"===e.type?s.a.createElement(s.a.Fragment,null,s.a.createElement($,{url:e.url,icon:"file-video",text:e.originalFileName}),s.a.createElement("video",{key:e._id,className:ae.a.attachment,controls:!0},s.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/mp4"}),s.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/webm"}),s.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"video/ogg"}),s.a.createElement("p",null,"Your browser doesn't support HTML5 video. Download this file for review."))):"audio/mp3"===e.type||"audio/ogg"===e.type?s.a.createElement(s.a.Fragment,null,s.a.createElement($,{url:e.url,icon:"file-audio",text:e.originalFileName}),s.a.createElement("audio",{controls:!0,key:e._id,className:ae.a.attachment},s.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"audio/mp3"}),s.a.createElement("source",{src:"http://chat.fs.a-level.com.ua/".concat(e.url),type:"audio/ogg"}),s.a.createElement("p",null,"Your browser doesn't support HTML5 audio. Download this file for review."))):"application/zip"===e.type?s.a.createElement($,{url:e.url,icon:"file-archive",text:e.originalFileName}):e.type&&(e.type.includes("application")||e.type.includes("text"))?s.a.createElement($,{url:e.url,icon:"file-alt",text:e.originalFileName}):s.a.createElement($,{url:e.url,icon:"file",text:e.originalFileName})}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(J.a,null,s.a.createElement("p",null,e.message&&e.message.text),e.message&&e.message.text&&s.a.createElement("p",null," ",function(e){var a=K()(e);console.log(a);var t=Array.from(a).map((function(e,a){return s.a.createElement(H.a,{url:e,key:a,media:["audio","video","image","logo"]})}));return s.a.createElement(s.a.Fragment,null,t)}(e.message.text)," ")))})),ne=t(216),se=t.n(ne),ce=Object(r.c)((function(e){return{chats:e.user.userData.chats,activeUserId:e.user.userData._id,originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(c.b)({getActiveChat:h.c.request,forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(s.a.memo((function(e){var a=s.a.useRef(null),t=function(e){e.target instanceof Element&&a.current&&!a.current.contains(e.target)&&n()};s.a.useEffect((function(){e.isForward?document.addEventListener("click",t):document.removeEventListener("click",t)}),[e.isForward]);var n=function(){e.saveOriginalMessage({originalMessage:null,isReply:!1,isForward:!1})},c=function(a){if(1===a.members.length)return{name:"You",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):_.a};if(a.members.length>2)return{name:a.title||"Group",avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):b.a};var t=a.members.find((function(a){return a._id!==e.activeUserId})),n=t&&t.avatar&&"http://chat.fs.a-level.com.ua/".concat(t.avatar.url),s=t&&(t.nick||t.login);return{name:a.title?a.title:s,avatar:a.avatar?"http://chat.fs.a-level.com.ua/".concat(a.avatar.url):n||_.a}};return s.a.createElement("div",{ref:a,className:se.a.forwardingContainer},s.a.createElement("header",{className:se.a.containerHeader},s.a.createElement("h4",{className:se.a.containerTitle},"Choose recipient"),s.a.createElement("button",{onClick:function(){return n()}},s.a.createElement(v.a,{icon:"times"}))),s.a.createElement("div",null,e.chats.map((function(a){return s.a.createElement(p.a,{key:a._id,chatId:a._id,name:c(a).name,avatarSrc:c(a).avatar,onClick:function(){return t=a._id,e.getActiveChat(t),void(e.originalMessage&&e.forwardMessage({activeChatId:t,originalMessageId:e.originalMessage._id}));var t}})}))))}))),re=t(217),le=t.n(re),ie=Object(r.c)((function(e){return{originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward,isReply:e.message.savedMessage.isReply}}),(function(e){return Object(c.b)({forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(s.a.memo((function(e){var a=s.a.useState(!0),t=Object(d.a)(a,2),n=t[0],c=t[1],r=s.a.useRef(null),l=s.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&c(!1)}),[c]);s.a.useEffect((function(){e.originalMessage?document.addEventListener("click",l):document.removeEventListener("click",l)}),[e.originalMessage,l]);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{ref:r,className:Y()(le.a.messageMenu,Object(T.a)({},le.a.invisible,!n))},s.a.createElement("ul",{className:le.a.menuList},s.a.createElement("li",{className:le.a.menuItem,onClick:function(){return e.saveOriginalMessage({originalMessage:e.originalMessage,isReply:!0}),void c(!1)}},s.a.createElement(v.a,{icon:"reply"}),"Reply"),s.a.createElement("li",{className:le.a.menuItem,onClick:function(){e.saveOriginalMessage({originalMessage:e.originalMessage,isForward:!0})}},s.a.createElement(v.a,{icon:"share"}),"Forward message"))),e.isForward&&s.a.createElement(ce,null))}))),oe=t(218),me=t.n(oe),ue=Object(r.c)((function(e){return{activeUserId:e.user.userData._id,nick:e.user.userData.nick,activeChat:e.chat.chatSuccessData.activeChat,activeChatName:e.chat.chatSuccessData.activeChatName,messages:e.chat.chatSuccessData.activeChat?e.chat.chatSuccessData.activeChat.messages:[],media:e.message.messageData.media,mediaUrl:e.media.fileData.url,originalMessage:e.message.savedMessage.originalMessage,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(c.b)({saveOriginalMessage:m.d},e)}))(s.a.memo((function(e){var a=Object(n.useRef)(null);s.a.useEffect((function(){t()}),[]),s.a.useEffect((function(){t()}),[e.messages]);var t=function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},c=function(a){return a.owner._id===e.activeUserId};return s.a.createElement("div",{className:me.a.chats,ref:a},e.messages&&e.messages.map((function(a){return s.a.createElement("div",{key:a._id,className:Y()(me.a.chat,Object(T.a)({},me.a.isUserMsg,c(a))),onClick:function(){return function(a){e.saveOriginalMessage({originalMessage:a,isReply:!1,isForward:!1})}(a)}},a.replyTo&&s.a.createElement("div",{className:me.a.replyBlock},s.a.createElement("p",{className:me.a.owner},a.replyTo.owner.nick||a.replyTo.owner.login),s.a.createElement(te,{message:a.replyTo})),a.forwarded&&s.a.createElement("div",{className:me.a.forwardedBlock},s.a.createElement("p",{className:me.a.owner},"Forwarded from ",a.forwarded.owner.nick||a.forwarded.owner.login),s.a.createElement(te,{message:a.forwarded})),e.activeChat.title&&!c(a)&&s.a.createElement("p",{className:me.a.owner},a.owner.nick||a.owner.login),s.a.createElement(te,{message:a}),s.a.createElement("time",{className:me.a.timeBlock},Q()(+a.createdAt).format("HH:mm  DD.MM")))})),e.originalMessage&&s.a.createElement(ie,null))}))),ge=(t(219),t(229)),de=t(221),ve=t.n(de),fe=s.a.memo((function(e){var a=s.a.useState(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],r=s.a.useRef(null),l=s.a.useCallback((function(e){e.target instanceof Element&&r.current&&!r.current.contains(e.target)&&c(!1)}),[c]);s.a.useEffect((function(){n?document.addEventListener("click",l):document.removeEventListener("click",l)}),[n,l]);return s.a.createElement("div",{className:ve.a.buttonWithEmoji},s.a.createElement("button",{onClick:function(){c(!n)},className:ve.a.button},s.a.createElement(v.a,{icon:"smile"})),n&&s.a.createElement("div",{ref:r,className:ve.a.emojiBlock},s.a.createElement(ge.a,{set:"google",onSelect:e.addEmoji})))})),he=t(24),pe=t(222),Ee=t.n(pe),_e=Object(r.c)((function(e){return{activeChatId:e.chat.chatSuccessData.activeChat._id,fileId:e.media.fileData._id}}),(function(e){return Object(c.b)({uploadFile:he.a.request,sendMessage:m.e.request},e)}))(s.a.memo((function(e){var a=s.a.useState(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],r=s.a.useState(""),l=Object(d.a)(r,2),i=l[0],o=l[1],m=s.a.useRef(null),u=s.a.useRef(null),g=s.a.useRef(null),f=s.a.useCallback((function(e){e.target instanceof Element&&m.current&&!m.current.contains(e.target)&&c(!1)}),[c]);s.a.useEffect((function(){n?document.addEventListener("click",f):document.removeEventListener("click",f)}),[n,f]);return s.a.createElement("div",{className:Ee.a.buttonWithFileUpload},s.a.createElement("button",{onClick:function(){c(!n)},className:Ee.a.paperclipButton},s.a.createElement(v.a,{icon:"paperclip"})),n&&s.a.createElement("div",{ref:m,className:Ee.a.dialogContainer},s.a.createElement("header",{className:Ee.a.dialogHeader},s.a.createElement("h4",null,"Upload a file"),s.a.createElement("button",{onClick:function(){return c(!1)}},s.a.createElement(v.a,{icon:"times"}))),s.a.createElement("form",{className:Ee.a.dialogForm,ref:u,method:"post",action:"/upload",encType:"multipart/form-data",id:"form",onSubmit:function(a){e.activeChatId&&e.sendMessage({activeChatId:e.activeChatId,text:i,mediaId:e.fileId}),c(!1),o("")}},s.a.createElement("input",{type:"file",name:"media",id:"media",ref:g,onChange:function(){var a;u.current&&(a=u.current,e.uploadFile(a))}}),s.a.createElement("label",{className:Ee.a.dialogLabel,htmlFor:"fileMessage"},"Add a message about the file"),s.a.createElement("input",{id:"fileMessage",className:Ee.a.dialogInput,autoFocus:!0,type:"text",name:"fileMessage",value:i,onChange:function(e){return o(e.target.value)},placeholder:"Write your message"}),s.a.createElement("button",{type:"submit",className:Ee.a.submitBtn},"Upload"))))}))),ye=t(223),be=t.n(ye),Ce=s.a.memo((function(e){return s.a.createElement("div",{className:be.a.originalMessageBlock},s.a.createElement("div",{className:be.a.originalMessage},s.a.createElement("p",{className:be.a.owner},e.originalMessage&&(e.originalMessage.owner.nick||e.originalMessage.owner.login)),s.a.createElement(te,{message:e.originalMessage}),s.a.createElement("button",{onClick:e.deleteOriginalMessage,className:be.a.deleteOriginalMessage},s.a.createElement(v.a,{icon:"times"}))))})),Me=t(224),Ne=t.n(Me),we=Object(r.c)((function(e){return{activeChatId:e.chat.chatSuccessData.activeChat._id,originalMessage:e.message.savedMessage.originalMessage,isReply:e.message.savedMessage.isReply,isForward:e.message.savedMessage.isForward}}),(function(e){return Object(c.b)({sendMessage:m.e.request,replyToMessage:m.c.request,forwardMessage:m.a.request,saveOriginalMessage:m.d},e)}))(s.a.memo((function(e){var a=s.a.useState(""),t=Object(d.a)(a,2),n=t[0],c=t[1];return s.a.createElement(s.a.Fragment,null,e.isReply&&s.a.createElement(Ce,{originalMessage:e.originalMessage,deleteOriginalMessage:function(){e.saveOriginalMessage({originalMessage:null,isReply:!1,isForward:!1})}}),s.a.createElement("div",{className:Ne.a.messageBlock},s.a.createElement(fe,{addEmoji:function(e){c(n+e.native)}}),s.a.createElement("form",{action:"",onSubmit:function(a){a.preventDefault(),""!==n.trim()&&(e.activeChatId&&e.originalMessage&&e.isReply?e.replyToMessage({activeChatId:e.activeChatId,text:n,originalMessageId:e.originalMessage._id}):e.activeChatId&&e.sendMessage({activeChatId:e.activeChatId,text:n,mediaId:null}),c(""))},className:Ne.a.messageForm},s.a.createElement("input",{className:Ne.a.messageInput,placeholder:"Write your message",type:"text",autoFocus:!0,value:n,onChange:function(e){return c(e.target.value)}}),s.a.createElement("div",{className:Ne.a.buttonBlock},s.a.createElement("button",{type:"submit",className:Ne.a.button},s.a.createElement(v.a,{icon:"paper-plane"})),s.a.createElement(_e,null)))))}))),Ie=t(225),ke=t.n(Ie),Oe=s.a.memo((function(e){return s.a.createElement("div",{className:ke.a.chatWindow},s.a.createElement(U,{activeChatName:e.name}),s.a.createElement(ue,null),s.a.createElement(we,null))})),De=Object(r.c)((function(e){return{nick:e.user.userData.nick,login:e.user.userData.login,avatar:e.user.userData.avatar?"http://chat.fs.a-level.com.ua/".concat(e.user.userData.avatar.url):_.a,activeChatId:e.chat.chatSuccessData.activeChat._id,activeChatName:e.chat.chatSuccessData.activeChatName}}),(function(e){return Object(c.b)({getUser:o.a.request},e)}))(s.a.memo((function(e){return s.a.createElement("main",{className:B.a.main},e.activeChatId?s.a.createElement(Oe,{name:e.activeChatName}):s.a.createElement(x,{name:e.nick||e.login,avatarSrc:e.avatar}))})));a.default=Object(r.c)(null,(function(e){return Object(c.b)({getUser:o.a.request,onMessage:m.b},e)}))(s.a.memo((function(e){return s.a.useEffect((function(){if(localStorage.getItem("authToken")){var a=i()("http://chat.fs.a-level.com.ua/");a.emit("jwt",localStorage.authToken),a.on("jwt_ok",(function(e){return console.log(e)})),a.on("jwt_fail",(function(e){return console.log(e)})),a.on("msg",(function(a){console.log("message",a),e.onMessage(a)}))}}),[]),s.a.createElement("div",{className:g.a.profile},s.a.createElement(O,null),s.a.createElement(De,null))})))},72:function(e,a,t){e.exports=t.p+"static/media/user_avatar.c3631c65.png"},85:function(e,a,t){"use strict";var n=t(1),s=t.n(n),c=t(65),r=t(92),l=t.n(r),i=s.a.memo((function(e){var a=s.a.useState(0),t=Object(c.a)(a,2),n=t[0],r=t[1];return s.a.useEffect((function(){e.newMessageId&&e.newMessageChatId===e.chatId&&r(n+1)}),[e.newMessageId]),s.a.useEffect((function(){e.chatId===e.activeChatId&&r(0)}),[e.activeChatId]),s.a.createElement(s.a.Fragment,null,n>0&&e.chatId!==e.activeChatId&&s.a.createElement("div",{className:l.a.counter},n))})),o=t(93),m=t.n(o);a.a=s.a.memo((function(e){return s.a.useEffect((function(){localStorage.getItem("authToken")}),[]),s.a.createElement("div",{className:m.a.user,onClick:e.onClick},s.a.createElement("img",{src:e.avatarSrc,alt:"avatar",className:m.a.userImg}),s.a.createElement("div",{className:m.a.userDetails},s.a.createElement("p",{className:m.a.useDetailsName},e.name)),s.a.createElement(i,{chatId:e.chatId,newMessageId:e.newMessageId,newMessageChatId:e.newMessageChatId,activeChatId:e.activeChatId}))}))},92:function(e,a,t){e.exports={counter:"style_counter__1moC1"}},93:function(e,a,t){e.exports={user:"style_user__2v5VR",userImg:"style_userImg__1CkCR",userDetails:"style_userDetails__wkzC-",userDetailsName:"style_userDetailsName__2_mEK"}},94:function(e,a){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=4.e1a17342.chunk.js.map